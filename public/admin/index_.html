<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Admin Bidedigitala</title>

    <!-- 1) Carga la hoja de estilos correcta -->
    <link
      rel="stylesheet"
      href="https://unpkg.com/netlify-cms@^2.0.0/dist/cms.css"
    />

    <!-- 2) Habilita la inicialización manual -->
    <script>window.CMS_MANUAL_INIT = true;</script>

    <!-- 3) Carga el bundle que define `window.CMS` -->
    <script src="https://unpkg.com/netlify-cms@^2.0.0/dist/netlify-cms.js"></script>
  </head>

  <body>
    <!-- 4) Tu configuración (antes de CMS.init) -->
    <script>
      window.CMS_CONFIG = {
        backend: {
          name: "github",
          repo: "artatxoria/bidedigitala",
          branch: "main",
          api_root: "https://api.github.com",
          open_authoring: false,
          auth_scope: "repo",
          client_id: "Ov23liIDXJl2davy6Rn0"
        },
        media_folder: "public/assets",
        public_folder: "/assets",
        collections: [
          {
            name: "blog_es",
            label: "Blog ES",
            folder: "src/pages/es/blog",
            create: true,
            format: "md",
            fields: [
              { name: "title", label: "Título", widget: "string" },
              { name: "date",  label: "Fecha",   widget: "datetime" },
              { name: "body",  label: "Contenido", widget: "markdown" }
            ]
          },
          {
            name: "blog_eu",
            label: "Blog EU",
            folder: "src/pages/eu/blog",
            create: true,
            format: "md",
            fields: [
              { name: "title", label: "Izenburua", widget: "string" },
              { name: "date",  label: "Data",      widget: "datetime" },
              { name: "body",  label: "Eduki",     widget: "markdown" }
            ]
          }
        ]
      };
    </script>

    <!-- 5) Finalmente, inicializamos -->
    <script>
      CMS.init({ config: window.CMS_CONFIG });
    </script>
  </body>
</html>
